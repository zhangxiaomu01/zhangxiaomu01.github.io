<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <div id="main" style="margin-top: 30px;margin-left: 30px;"></div>
        <div id="webgl" style="margin-top: 0px;margin-left: 0px;"></div>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        
        <script src="./main.js"></script>
        <script type="module">
            console.log("Geno prototype runs!");
            let isRunning = true;
            // Example usage:
            // 1. Get the genoPrototype object;
            let genoPrototype = getGenoPrototype();

            // 2. Update particle parameters before initialize the particle;
            // let bottomParticleParameter = getBottomParticleParameter();
            // bottomParticleParameter.radialVelocity.theta = 5;
            // let upParticleParameter = getUpParticleParameter();
            // upParticleParameter.radialVelocity.theta = 25;

            // 3. Call initParticles to finish the setup.
            initParticles();

            // show FPS performance panel
            // showFPSPanel();

            // Get the current camera.
            // let camera = getCamera();
            // camera.position.set(0.0, 110, 337);

            // Sets the upper sphere rotate speed.
            // setUpperSphereRotateSpeed(0.002);

            // Updates the bloom effect.
            // updateBloomEffect(0.1, 0.3, 0.3);

            function render() {
                genoPrototype.render();
                if (isRunning) {
                    requestAnimationFrame(render);
                }
            }

            render();

            /** 
             * Call this to stop rendering / garbage collection.
             * */
            window.stopRendering = function stopRendering() {
                isRunning = false;
                genoPrototype.dispose();
            }
        </script>
    </body>
</html>